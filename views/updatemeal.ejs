<%- include("header") -%>
<form method="post" action="/updateMeals/<%= meal._id %>?_method=PATCH">
    <div class="form-group">
        <label for="typeOfMeal">typeOfMeal</label>

        <select class="form-control" id="typeOfMeal" name="typeOfMeal" disabled>
            <option><%= meal.category %></option>
        </select>
    </div>
    <div class="form-group">
        <label for="name">Name of the Meal</label>
        <input name="name" id="name" type="text" value="<%= meal.name %>"class="form-control" disabled readonly/>
    </div>
    <div class="form-group">
        <label>Food Items in the Meal</label>
        <% foodItems.forEach((foodItem)=> { %>
            <% if( meal.foodItems.some(mealfoodItem => mealfoodItem.foodItem.name === foodItem.name ) ) { %>
                <div class="card" style="margin: 5px 0px 5px 0px">
                    <div class="card-body">
                        <div class="form-check" style="display: inline;">
                            <input class="form-check-input" type="checkbox" checked value=<%= foodItem._id %> id="foodItem" name="foodItem">
                            <label class="form-check-label" for="foodItem">
                               <strong><%= foodItem.name %></strong> 
                            </label>
                        </div>
                        <div class="form-group" >
                            <label for="quantity" style="display: inline;">Quantity (in <%= foodItem.acceptedUnits %>)</label>
                            <input class="form-control" style="width: 5rem"name = "quantity" id="quantity" type = "number" value="0" />
                        </div>
                    </div>
                  </div>
            <% }else { %>
                <div class="card" style="margin: 5px 0px 5px 0px">
                    <div class="card-body">
                        <div class="form-check" style="display: inline;">
                            <input class="form-check-input" type="checkbox" value=<%= foodItem._id %> id="foodItem" name="foodItem">
                            <label class="form-check-label" for="foodItem">
                               <strong><%= foodItem.name %></strong> 
                            </label>
                        </div>
                        <div class="form-group" >
                            <label for="quantity" style="display: inline;">Quantity (in <%= foodItem.acceptedUnits %>)</label>
                            <input class="form-control" style="width: 5rem"name = "quantity" id="quantity" type = "number" value="0" />
                        </div>
                    </div>
                  </div>
            <% } %>
        <% }) %>
    </div>
    <div class="form-group">
        <button type="submit" class="btn btn-info">Add Meal</button>
    </div>
</form>
<%- include("footer") -%>